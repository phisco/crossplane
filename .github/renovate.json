{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base"
  ],
  "prConcurrentLimit": 5,
  "baseBranches": ["master","release-1.8","release-1.9","release-1.10"],
  "ignorePaths": ["design/**"],
  "postUpdateOptions": ["gomodTidy"],
  "recreateClosed": true,
  "regexManagers": [
    {
      "fileMatch": ["^.github/workflows/ci.yml$"],
       "matchStrings": [
        "#\\s*renovate:\\s*datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\s.*?_VERSION='(?<currentValue>.*)'$"
      ],
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}"
    }
  ],
  "packageRules": [
    {
      "matchDatasources": [
        "go"
      ],
      "matchDepNames": [
        "k8s.io/client-go"
      ],
      "allowedVersions": "<1.0"
    }, {
      "matchDatasources": [
        "go"
      ],
      "groupName": "kubernetes patches",
      "matchUpdateTypes": [
        "patch"
      ],
      "matchPackagePrefixes": [
        "k8s.io",
        "sigs.k8s.io"
      ]
    }, {
      "matchDatasources": [
        "go"
      ],
      "matchUpdateTypes": [
        "major",
        "minor"
      ],
      "matchPackagePrefixes": [
        "k8s.io",
        "sigs.k8s.io"
      ]
    }, {
      "matchDatasources": [
        "go"
      ],
      "matchPackagePatterns": [
        "*"
      ],
      "excludePackagePrefixes": [
        "k8s.io",
        "sigs.k8s.io"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "groupName": "all non-major go dependencies"
    }, {
      "matchDepTypes": [
        "action"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "groupName": "all non-major github action",
      "pinDigests": true
    },{
      "matchDepTypes": [
        "action"
      ],
      "pinDigests": true
    }

  ]
}
